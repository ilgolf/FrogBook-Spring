# Day_22

## LSP - 리스코프 치환 원칙

> "서브 타입은 언제나 자신의 기반 타입(base Type)으로 교체할 수 있어야한다." - 로버트 C.마틴
> 

상속에 대해 설명하면서 객체 지향에서의 상속은 조직도나 계층도가 아닌 분류도가 돼야 한다고 했다. 객체 지햐의 상속은 다음의 조건을 만족해야 된다.

- 하위 클래스 is kind of 상위 클래스 - 하위 분류는 상위 분류의 한 종류이다.
- 구현 클래스 is able to 인터페이스 -  구현 분류는 인터페이스 할 수 있어야 한다.

위 두 개의 문장대로 구현된 프로그램이라면 이미 리스코프 치환 원칙을 잘 지키고 있다고 할 수 있다. 하지만 위 문장대로 구현되지 않은 코드가 존재할 수 있는데 바로 상속이 조직도나 계층 형태로 구축된 경우다.

아버지를 상위 클래스(기반 타입)로 하는 딸이라는 하위 클래스(서브 타입)가 있다고 하자. 바로 전형적인 계층도 형태이며, 객체 지향의 상속을 잘못 적용된 예다. 그럼 무엇이 문제인지 생각해 보자. 상위 클래스의 객체 참조 변수에는 하위 클래스의 인스턴스를 할당할 수 있다.

```java
Daddy daughter = new Daughter();
```

이상한 형태이다. 딸이 아빠의 역할도 하고 있다. 딸은 아버지형 객체 참조 변수이기에 아버지 객체가 가진 행위를 할 수 있어야 하는데 춘향이에게 아버지의 어떤 역할을 시킬 수 있을까? 이번에는 동물 클래스와 이를 상속(확장)하는 펭귄 클래스가 있다고 해보자. 즉, 분류도 형태인 경우를 살펴보자.

```java
Animal BBororo = new Penguin();
```

논리적으로 흠이 없다. 펭귄 한 마리가 태어나 뽀로로라 이름을 짓고 동물의 행위(메서드)를 하게 하는 데 전혀 이상함이 없다. 아버지 - 딸 구조(계층도/조직도)는 리스코프 치환 원칙을 위배하고 있는 것이며, 동물 - 펭귄 구조(분류도)는 리스코프 치환 원칙을 만족하는 것이다. 로버트 C.마틴의 말을 다시 의역해보자

> "하위 클래스의 인스턴스는 상위형 객체 참조 변수에 대입해 상위 클래스의 인스턴스 역할을 하는 데 문제가 없어야 한다."
>